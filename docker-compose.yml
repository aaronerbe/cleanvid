version: '3.8'

services:
  cleanvid:
    build: .
    image: cleanvid:latest
    container_name: cleanvid
    
    volumes:
      # Mount your video directories
      - /volume1/movies/original:/input:ro           # Read-only input
      - /volume1/movies/filtered:/output             # Writable output
      - /volume1/docker/cleanvid/config:/config      # Configuration
      - /volume1/docker/cleanvid/logs:/logs          # Logs
    
    environment:
      - TZ=America/New_York                          # Set your timezone
    
    # Uncomment for scheduled processing via cron
    # command: process --max-time 300
    
    restart: unless-stopped
    
    # Resource limits (optional - adjust based on your NAS)
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G
        reservations:
          cpus: '1.0'
          memory: 512M
